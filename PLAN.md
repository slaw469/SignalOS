# SignalOS — Personal AI Command Center

## Overview
A web-based personal dashboard powered by Claude that combines your Google Calendar agenda, a smart todo list, and an AI chat interface. Claude manages your todos (auto-tagging, prioritizing) and calendar (read + write) via tool use. Built for a student/founder juggling school, a startup, Upwork freelancing, and DoorDash.

---

## Tech Stack

| Layer | Tech | Reason |
|-------|------|--------|
| Framework | **Next.js 14+ (App Router, TypeScript)** | Full-stack, Vercel-native, fast |
| Styling | **Tailwind CSS + shadcn/ui** | Rapid UI iteration, dark mode built-in |
| Database | **Supabase (PostgreSQL)** | Cloud DB, real-time subscriptions, free tier, auth if needed later |
| Calendar | **Google Calendar API (OAuth2)** | Read + write events |
| LLM | **Claude API (Anthropic SDK) with tool use** | Function calling for todo/calendar management |
| Hosting | **Vercel** | Free tier, cron jobs, edge functions |
| Cron | **Vercel Cron** | 9am daily briefing generation |

---

## MVP Scope (Phase 1) — What We Build First

### 1. Agenda Panel
- **Default view:** Today's events pulled from Google Calendar
- **Toggle:** Switch to full week view
- **Display:** Time, event name, location, duration
- **Real-time:** Refresh on page load, manual refresh button
- **Google OAuth2 flow:** User signs in with Google to grant calendar access

### 2. Todo List Panel
- **Fields per todo:**
  - `title` (string)
  - `description` (optional string)
  - `priority` (High / Medium / Low)
  - `tags` (array of strings — auto-generated by Claude, e.g. "personal", "startup", "school", "upwork")
  - `due_date` (optional)
  - `completed` (boolean)
  - `created_at`, `updated_at` (timestamps)
- **Display:** Sorted by priority (High first), then by due date
- **Filter/group by tags** — click a tag to filter
- **Manual CRUD:** Can also add/edit/delete todos directly in UI without Claude
- **Claude auto-tags:** When Claude adds a todo, it infers the tag from context (e.g. "meal prep" → "personal")

### 3. Claude Chat Interface
- **Persistent chat panel** (right side or bottom drawer)
- **Claude API with tool use** — the following tools are defined:

#### Tool Definitions

```
add_todo
├── title: string (required)
├── description: string (optional)
├── priority: "high" | "medium" | "low" (required)
├── tags: string[] (auto-inferred)
└── due_date: string (optional)

update_todo
├── todo_id: string (required)
├── title: string (optional)
├── priority: "high" | "medium" | "low" (optional)
├── tags: string[] (optional)
├── due_date: string (optional)
└── completed: boolean (optional)

delete_todo
└── todo_id: string (required)

get_todos
├── filter_tag: string (optional)
├── filter_priority: string (optional)
└── include_completed: boolean (default false)

get_todays_agenda
└── (no params — pulls from Google Calendar)

get_week_agenda
└── (no params — pulls full week from Google Calendar)

create_calendar_event
├── title: string (required)
├── start_time: ISO string (required)
├── end_time: ISO string (required)
├── description: string (optional)
└── location: string (optional)

update_calendar_event
├── event_id: string (required)
├── title: string (optional)
├── start_time: ISO string (optional)
├── end_time: ISO string (optional)
└── description: string (optional)

delete_calendar_event
└── event_id: string (required)
```

- **System prompt** includes:
  - User context: "Steven is a CS student with lectures Tues/Thurs at 10am and 5pm. He works on a startup, takes Upwork gigs, and does DoorDash evenings. He wakes at 9am, sleeps at 1am."
  - Current date/time
  - Today's agenda (injected at message time)
  - Current todo list (injected at message time)
  - Instructions: "Auto-tag todos based on context. Be concise. Prioritize actionable responses."

- **Chat history:** Stored in Supabase, loaded on page open (last 50 messages)

### 4. Daily Auto-Briefing (9am Cron)
- **Vercel Cron job** runs at 9am daily
- Pulls today's Google Calendar events + open todos
- Sends to Claude API with prompt: "Generate a morning briefing for Steven"
- Stores the briefing in Supabase
- **When user opens the dashboard:** The pre-generated briefing is displayed at the top of the chat as the first message
- If no briefing exists (e.g. first visit), generate one on page load

---

## Database Schema (Supabase)

```sql
-- Todos
CREATE TABLE todos (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  title TEXT NOT NULL,
  description TEXT,
  priority TEXT CHECK (priority IN ('high', 'medium', 'low')) DEFAULT 'medium',
  tags TEXT[] DEFAULT '{}',
  due_date TIMESTAMPTZ,
  completed BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- Chat messages
CREATE TABLE messages (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  role TEXT CHECK (role IN ('user', 'assistant')) NOT NULL,
  content TEXT NOT NULL,
  tool_calls JSONB,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Daily briefings
CREATE TABLE briefings (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  date DATE UNIQUE NOT NULL,
  content TEXT NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Settings (for future API key storage, preferences)
CREATE TABLE settings (
  key TEXT PRIMARY KEY,
  value TEXT NOT NULL,
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
```

---

## Project Structure

```
signalos/
├── app/
│   ├── layout.tsx              # Root layout, providers
│   ├── page.tsx                # Main dashboard page
│   ├── api/
│   │   ├── chat/route.ts       # Claude API + tool execution endpoint
│   │   ├── todos/route.ts      # CRUD for todos
│   │   ├── calendar/route.ts   # Google Calendar proxy endpoints
│   │   ├── briefing/route.ts   # Generate/fetch daily briefing
│   │   └── cron/briefing/route.ts  # Vercel cron endpoint (9am)
│   └── auth/
│       └── google/callback/route.ts  # Google OAuth2 callback
├── components/
│   ├── agenda-panel.tsx        # Calendar/agenda display
│   ├── todo-panel.tsx          # Todo list with filters
│   ├── todo-item.tsx           # Individual todo row
│   ├── chat-panel.tsx          # Claude chat interface
│   ├── chat-message.tsx        # Single message bubble
│   ├── briefing-banner.tsx     # Morning briefing display
│   ├── tag-badge.tsx           # Tag pill component
│   └── priority-badge.tsx      # Priority indicator
├── lib/
│   ├── claude.ts               # Claude API client + tool definitions
│   ├── tools.ts                # Tool execution handlers
│   ├── google-calendar.ts      # Google Calendar API wrapper
│   ├── supabase.ts             # Supabase client
│   └── utils.ts                # Helpers
├── .env.local                  # API keys (Claude, Google, Supabase)
├── vercel.json                 # Cron config
├── package.json
└── tsconfig.json
```

---

## Build Sequence (Chunked)

### Chunk 1: Project Setup + Database
1. Initialize Next.js 14 project with TypeScript + Tailwind + shadcn/ui
2. Set up Supabase project + create tables (todos, messages, briefings, settings)
3. Configure environment variables (.env.local)
4. Set up Supabase client in `lib/supabase.ts`
5. **Verify:** Can connect to Supabase, read/write a test row

### Chunk 2: Todo System (No AI Yet)
1. Build `api/todos/route.ts` — CRUD endpoints (GET, POST, PATCH, DELETE)
2. Build `todo-panel.tsx` — display todos sorted by priority
3. Build `todo-item.tsx` — checkbox, title, priority badge, tags, delete button
4. Add manual "Add Todo" form (title, priority, optional due date)
5. Add tag filtering (click tag to filter list)
6. **Verify:** Can add, edit, complete, delete, and filter todos in the UI

### Chunk 3: Google Calendar Integration
1. Set up Google Cloud project + enable Calendar API
2. Implement OAuth2 flow (consent screen → callback → store tokens)
3. Build `lib/google-calendar.ts` — read events, create/update/delete events
4. Build `api/calendar/route.ts` — proxy endpoints
5. Build `agenda-panel.tsx` — today view with toggle to week view
6. **Verify:** Can see real Google Calendar events, create a test event from the app

### Chunk 4: Claude Chat + Tool Use
1. Build `lib/claude.ts` — Claude API client with all tool definitions
2. Build `lib/tools.ts` — tool execution handlers (each tool calls the right DB/API function)
3. Build `api/chat/route.ts` — streaming chat endpoint that:
   - Receives user message
   - Injects system prompt with current todos + today's agenda
   - Sends to Claude API with tools
   - Executes any tool calls Claude makes
   - Returns Claude's response (streamed)
4. Build `chat-panel.tsx` — chat UI with input, message history, streaming responses
5. Build `chat-message.tsx` — message bubbles (user vs assistant)
6. Store messages in Supabase, load last 50 on page open
7. **Verify:** Can chat with Claude, ask it to add a todo, see it appear in todo panel. Ask it to create a calendar event, see it in Google Calendar.

### Chunk 5: Daily Auto-Briefing
1. Build `api/briefing/route.ts` — generates briefing from calendar + todos via Claude
2. Build `api/cron/briefing/route.ts` — Vercel cron endpoint
3. Configure `vercel.json` with cron schedule (`0 9 * * *` → 9am daily)
4. Build `briefing-banner.tsx` — displays today's briefing at top of chat
5. On page load: fetch today's briefing. If none exists, generate one.
6. **Verify:** Manually trigger cron endpoint, see briefing generated. Open dashboard, see briefing displayed.

### Chunk 6: Polish + Deploy
1. Layout: Three-panel layout (Agenda left, Todos center, Chat right) — responsive
2. Dark mode (default)
3. Loading states, error handling, empty states
4. Deploy to Vercel
5. Test full flow end-to-end on production
6. **Verify:** Full flow works on Vercel — OAuth, calendar, todos, chat, briefing

---

## Future Phases (Not in MVP)

- **Phase 2:** X/Twitter automation (drafting, scheduling, posting, status dashboard)
- **Phase 3:** API key input in settings UI (transition from .env)
- **Phase 4:** UI themes/iteration (try different aesthetics)
- **Phase 5:** Push notifications (briefing alert at 9am)
- **Phase 6:** Upwork/DoorDash income tracking + capital goal tracker
- **Phase 7:** LeetCode integration (auto-post daily solves)

---

## Environment Variables Needed

```
# Claude
ANTHROPIC_API_KEY=sk-ant-...

# Google Calendar OAuth2
GOOGLE_CLIENT_ID=...
GOOGLE_CLIENT_SECRET=...
GOOGLE_REDIRECT_URI=http://localhost:3000/auth/google/callback

# Supabase
NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=...
SUPABASE_SERVICE_ROLE_KEY=...

# Vercel Cron Secret
CRON_SECRET=...
```

---

## Verification Plan

After each chunk, verify:
1. **Chunk 1:** `npx supabase` connects, test insert/select works
2. **Chunk 2:** Full todo CRUD in browser, filtering by tags works
3. **Chunk 3:** Google OAuth flow completes, real calendar events display, can create event
4. **Chunk 4:** Chat with Claude → "add buy groceries to my todos" → todo appears in list. "Schedule a meeting tomorrow at 2pm" → event created in Google Calendar
5. **Chunk 5:** Hit `/api/cron/briefing` → briefing stored. Open dashboard → briefing shows
6. **Chunk 6:** Full production deploy, all features work on vercel.app domain
